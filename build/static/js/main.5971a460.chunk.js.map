{"version":3,"sources":["services/persons.js","components/Filter.js","components/PersonForm.js","components/PersonList.js","components/Notification.js","App.js","index.js"],"names":["baseUrl","axios","get","then","response","data","newObject","post","id","delete","put","Filter","searchTerm","handleFilterChange","value","onChange","PersonForm","addPerson","newName","newNumber","handleNameChange","handleNumberChange","onSubmit","type","PersonList","searchResults","persons","deletePerson","length","map","person","key","name","number","onClick","Notification","message","error","style","color","background","fontSize","borderStyle","borderRadius","padding","marginBottom","App","useState","setPersons","setNewName","setNewNumber","setSearchTerm","setSearchResults","infoMessage","setInfoMessage","setError","useEffect","personService","initialPersons","filter","toLowerCase","includes","event","target","preventDefault","personObject","doubledPerson","find","doubledPersonNumber","alert","window","confirm","changedPerson","catch","setTimeout","returnedPerson","concat","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.5971a460.chunk.js","sourcesContent":["import axios from 'axios'\n// Use frontend alone\nconst baseUrl = 'http://localhost:3001/api/persons'\n// Use with backend\n// const baseUrl = '/api/persons'\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\n\nconst createOne = newObject => {\n  const request = axios.post(baseUrl, newObject)\n  return request.then(response => response.data)\n}\n\nconst deleteOne = (id) => {\n  const request = axios.delete(`${baseUrl}/${id}`)\n  return request.then(response => response.data)\n}\n\nconst updateOne = (id, newObject) => {\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\n  return request.then(response => response.data)\n}\n\nexport default { getAll, createOne, deleteOne, updateOne }\n","import React from 'react'\n\nconst Filter = ({ searchTerm, handleFilterChange }) => {\n  return (\n    <>\n      filter shown with: <input value={searchTerm} onChange={handleFilterChange} />\n    </>\n  )\n}\n\nexport default Filter;\n","import React from 'react'\n\nconst PersonForm = ({ addPerson, newName, newNumber, handleNameChange, handleNumberChange }) => {\n  return (\n    <form onSubmit={addPerson}>\n      <div>\n        name: <input value={newName} onChange={handleNameChange} /><br />\n          number: <input value={newNumber} onChange={handleNumberChange} />\n      </div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  )\n}\n\nexport default PersonForm;\n","import React from 'react'\n\nconst PersonList = ({ searchResults, persons, deletePerson }) => {\n  return (\n    <ul>\n      {searchResults.length\n        ? searchResults.map(person => <li key={person.name}>{person.name} {person.number}</li>)\n        : persons.map(person => \n          <li key={person.name}>\n            {person.name} {person.number} <button onClick={() => deletePerson(person.id, person.name)}>delete</button>\n          </li>\n        )\n      }\n    </ul>\n  )\n}\n\nexport default PersonList;\n","import React from 'react';\n\nconst Notification = ({ message, error }) => {\n  const successStyle = {\n    color: 'green',\n    background: 'lightgrey',\n    fontSize: 20,\n    borderStyle: 'solid',\n    borderRadius: 5,\n    padding: 10,\n    marginBottom: 10\n  }\n\n  const errorStyle = {\n    color: 'red',\n    background: 'lightgrey',\n    fontSize: 20,\n    borderStyle: 'solid',\n    borderRadius: 5,\n    padding: 10,\n    marginBottom: 10\n  }\n\n  if (message === null) {\n    return null\n  }\n\n  return (\n    <div style={error ? errorStyle : successStyle}>\n      {message}\n    </div>\n  );\n}\n\nexport default Notification;\n","import React, { useState, useEffect } from 'react'\nimport personService from './services/persons'\nimport Filter from './components/Filter'\nimport PersonForm from './components/PersonForm'\nimport PersonList from './components/PersonList'\nimport Notification from './components/Notification'\n\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [searchTerm, setSearchTerm] = useState('')\n  const [searchResults, setSearchResults] = useState([])\n  const [infoMessage, setInfoMessage] = useState(null)\n  const [error, setError] = useState(false);\n\n\n  useEffect(() => {\n    personService\n      .getAll()\n      .then(initialPersons => setPersons(initialPersons))\n  }, [])\n\n\n  useEffect(() => {\n    searchTerm.length\n      ? setSearchResults(persons.filter(person =>\n        person.name.toLowerCase().includes(searchTerm.toLowerCase())))\n      : setSearchResults([])\n\n  }, [searchTerm, persons])\n\n\n  const addPerson = event => {\n    event.preventDefault()\n\n    const personObject = {\n      name: newName,\n      number: newNumber\n    }\n\n    const doubledPerson = persons.find(person => (\n      person.name.toLowerCase() === newName.toLowerCase() && person.number === newNumber\n    ))\n\n    const doubledPersonNumber = persons.find(person => (\n      person.name.toLowerCase() === newName.toLowerCase() && person.number !== newNumber\n    ))\n\n    // case if person exists already \n    if (doubledPerson) {\n      alert(`${doubledPerson.name} is already added to phonebook`)\n    }\n\n    // case if number from person should be updated\n    else if (doubledPersonNumber) {\n      const message = `${doubledPersonNumber.name} is already in the phonebook, do you want to replace the old number with the new one?`\n      const confirmed = window.confirm(message);\n\n      if (confirmed) {\n        const changedPerson = { ...doubledPersonNumber, number: newNumber }\n        personService\n          .updateOne(doubledPersonNumber.id, changedPerson)\n          .then((data) => {\n            setPersons(persons.map(person => person.id === data.id ? data : person))\n            setNewName('');\n            setNewNumber('');\n          })\n          .catch((error) => {\n            if (error) {\n              setError(true)\n              setInfoMessage(`${error.response.data.error}`)\n              setTimeout(() => {\n                setInfoMessage(null)\n                setError(false)\n              }, 5000)\n              setNewName('')\n              setNewNumber('')\n            } else {\n              setError(true)\n              setInfoMessage(`${personObject.name} was already deleted from server`)\n              setPersons(persons.filter(person => person.id !== doubledPersonNumber.id))\n              setTimeout(() => {\n                setInfoMessage(null)\n                setError(false)\n              }, 5000)\n            }\n          })\n      } else {\n        setNewName('')\n        setNewNumber('')\n      }\n    }\n\n    // normal create new person case\n    else {\n      personService\n        .createOne(personObject)\n        .then(returnedPerson => {\n          setPersons(persons.concat(returnedPerson))\n          setNewName('')\n          setNewNumber('')\n          setInfoMessage(`Added ${personObject.name}`)\n          setTimeout(() => {\n            setInfoMessage(null)\n          }, 5000)\n        })\n        .catch(error => {\n          setError(true)\n          setInfoMessage(`${error.response.data.error}`)\n          setTimeout(() => {\n            setInfoMessage(null)\n            setError(false)\n          }, 5000)\n          setNewName('')\n          setNewNumber('')\n        })\n    }\n  }\n\n\n  const deletePerson = (id, name) => {\n    const message = `Do you want to delete ${name}?`\n    const confirmed = window.confirm(message)\n    if (confirmed) {\n      personService\n        .deleteOne(id)\n        .then(() => {\n          setPersons(persons.filter(person => person.id !== id))\n        })\n    }\n  }\n\n\n  const handleFilterChange = event => {\n    setSearchTerm(event.target.value)\n  }\n\n  const handleNameChange = event => {\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = event => {\n    setNewNumber(event.target.value)\n  }\n\n\n  return (\n    <div>\n      <h1>Phonebook</h1>\n      <Notification message={infoMessage} error={error} />\n      <Filter\n        searchTerm={searchTerm}\n        handleFilterChange={handleFilterChange} />\n      <h2>Add new Contact</h2>\n      <PersonForm\n        addPerson={addPerson}\n        newName={newName}\n        newNumber={newNumber}\n        handleNameChange={handleNameChange}\n        handleNumberChange={handleNumberChange} />\n      <h2>Numbers</h2>\n      <PersonList\n        searchResults={searchResults}\n        persons={persons}\n        deletePerson={deletePerson} />\n    </div>\n  )\n}\n\nexport default App\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}